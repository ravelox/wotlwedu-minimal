<app-modal-loader *ngIf="loader.loading"></app-modal-loader>
<app-modal-alert
  *ngIf="alertBox.errorMessage"
  [message]="alertBox.errorMessage"
  (close)="alertBox.onCloseAlert()"
></app-modal-alert>
<div class="ww-page-header-title">Register with Wotlwedu</div>
<div class="ww-flex-column">
  <div class="ww-flex-column">
    <div *ngIf="registrationInProgress">
      <div
        class="ww-flex-column"
        style="align-items: center; color: var(--theme-color)"
      >
        <p>Please complete all the fields to register</p>
      </div>
      <form
        (ngSubmit)="onSubmit(f)"
        [formGroup]="registrationForm"
        #f="ngForm"
        class="ww-flex-column"
        style="padding: 5px"
      >
        <div>
          <div class="ww-flex-column">
            <label for="email">Email Address</label>
            <input
              type="text"
              name="email"
              id="email"
              formControlName="email"
              required
              email
            />
          </div>
          <div class="ww-flex-column">
            <label for="firstName">First Name</label>
            <input
              type="text"
              name="firstName"
              id="firstName"
              formControlName="firstName"
              required
            />
          </div>
          <div class="ww-flex-column">
            <label for="lastName">Last Name</label>
            <input
              type="text"
              name="lastName"
              id="lastName"
              formControlName="lastName"
              required
            />
          </div>
          <div class="ww-flex-column">
            <label for="alias">Alias</label>
            <input
              type="text"
              name="alias"
              id="alias"
              formControlName="alias"
              required
            />
          </div>
        </div>
        <div class="ww-form-input">
          <label for="newpass">New Password</label>
          <input
            type="password"
            id="newpass"
            formControlName="newpass"
            required
          />
        </div>
        <div class="ww-form-input">
          <label for="verifypass">Re-enter password</label>
          <input
            type="password"
            id="verifypass"
            formControlName="verifypass"
            required
          />
        </div>
        <br />
        <div
          *ngIf="registrationForm.errors"
          style="background-color: red; color: white"
        >
          <p>Passwords do not match</p>
        </div>
        <div *ngIf="!registrationForm.errors">
          <p>&nbsp;</p>
        </div>
        <div
          class="ww-flex-row"
          style="justify-content: center; margin-top: 10px"
        >
          <button type="submit" class="ww-button" [disabled]="!f.valid">
            Register
          </button>
        </div>
      </form>
    </div>
    <div *ngIf="userConfirmed">
      <div
        class="ww-flex-column"
        style="align-items: center; color: var(--theme-color)"
      >
        <p>Thank you for verifying your email address.</p>
        <p>
          Your account is now active. Please go to the login page to access
          Wotlwedu.
        </p>
      </div>
    </div>
    <div *ngIf="registrationComplete">
      <div
        class="ww-flex-column"
        style="align-items: center; color: var(--theme-color)"
      >
        <p>
          The first step of your registration is successful. You will receive a
          verification email to the address you entered.
        </p>
        <p>
          Please click on the link in the email to complete your registration.
        </p>
      </div>
    </div>
    <div class="ww-flex-row" style="justify-content: center">
      <button type="button" class="ww-button" (click)="onClickBack()">
        Back
      </button>
    </div>
  </div>
</div>
